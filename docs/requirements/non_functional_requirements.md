# 非機能要件定義 (コア機能)

このドキュメントは、「不動産価値情報収集ツール」が満たすべき品質特性や制約などの非機能要件について定義します。

## NF01: プラットフォーム・アーキテクチャ

* **実行基盤:** **AWS** (Amazon Web Services) 上に構築する。
* **開発フレームワーク:** **AWS Amplify** を活用する。
* **アーキテクチャ:** **サーバーレスアーキテクチャ**を採用する (API Gateway, Lambda, SQSなど)。

## NF02: データベース

* **種別:** **Aurora Serverless v2 (PostgreSQL互換)** を利用する。
* **理由:** サーバーレス環境との親和性、コスト効率（低利用時）、スケーラビリティを考慮。

## NF03: 外部API利用

* **地図関連API:** **Google Maps Platform** (Geocoding, Places, Distance Matrix/Directions) を第一候補とする。
* **予算:** API利用料は月額1000円程度（または無料枠内）に抑えることを目指す。
* **規約遵守:** Google Maps Platform及びその他利用する全ての外部API、情報ソースの**利用規約を遵守**すること。特に不動産ポータルサイトからの情報収集は規約確認を必須とする。

## NF04: データ鮮度

* **賃料情報:** リアルタイム性は要求しないが、可能な範囲で新しい情報を参照することが望ましい。データの最終取得日時などを表示することを検討する。

## NF05: セキュリティ

* **認証:** **AWS Amplify Auth (Cognito)** を利用したユーザー認証を実装する。
* **アクセス制御:** 認証されたユーザーのみが主要機能を利用できるようにする。API Gateway等でアクセス制御を行う。
* **機密情報管理:** APIキー（Google Maps API等）やデータベース認証情報は、AWS Secrets Manager等の安全な場所に保管し、アプリケーションコード内にハードコーディングしないこと。

## NF06: パフォーマンス

* **応答性:** ユーザー操作（住所入力、検索開始）に対する画面の応答は速やかに行うこと。同期処理（ジオコーディング、施設検索）の結果は数秒以内に表示されることが望ましい。
* **非同期処理:** 時間のかかる賃料収集処理は非同期で行い、ユーザーを長時間待たせないこと。処理中であることが分かるUIを提供すること。

## NF07: 保守性・運用性

* **コード品質:** 可読性が高く、メンテナンスしやすいコードを記述すること（適切なコメント、変数名、モジュール分割など）。
* **構成管理:** インフラ構成はAmplify (CloudFormation) によってコード管理されることを基本とする。
* **ログ:** アプリケーションの動作状況やエラーを追跡できるよう、適切なログ（Lambdaのログなど）を出力すること。
* **監視:** 必要に応じて、AWS CloudWatch等による基本的なリソース監視、エラー監視を行うことを検討する。

## NF08: スケーラビリティ

* サーバーレスアーキテクチャを採用することで、将来的なアクセス増加に対してスケールしやすい構成を目指す。Aurora Serverless v2も自動スケーリングに対応する。