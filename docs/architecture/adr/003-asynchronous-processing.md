# 003: 賃料情報収集処理の非同期化

* **ステータス:** 決定済み (2025-05-04)
* **コンテキスト:**
    * 賃料情報の収集処理は、外部サイトへのアクセス（スクレイピング等）やデータ処理を伴うため、完了までに時間がかかる可能性がある。
    * 同期処理で行う場合、ユーザーの待ち時間が長くなり、UXを損なう可能性がある。
    * API GatewayやLambdaのタイムアウト制限に抵触するリスクがある。
* **決定事項:**
    * 賃料情報収集処理は、**Amazon SQS と AWS Lambda を用いた非同期アーキテクチャ**を採用する。
* **理由/根拠:**
    * **ユーザー体験向上:** ユーザーは処理開始リクエスト後すぐにレスポンスを受け取り、他の操作が可能になる。長時間待たされることがない。
    * **耐障害性向上:** 処理が一時的に失敗しても、メッセージがSQSキューに残るため、リトライが可能。
    * **スケーラビリティ:** リクエストが集中した場合でも、キューが緩衝材となり、バックエンド処理が自身のペースでスケールできる。
    * **疎結合:** リクエスト受付処理と実際の収集処理を分離することで、各コンポーネントの独立性が高まり、開発・保守が容易になる。
* **影響/結果:**
    * SQSキュー、処理開始用Lambda、処理実行用Lambda（SQSトリガー）、結果取得用API（ポーリング想定）の実装が必要となる。
    * フロントエンド側で、処理中のステータス表示と、結果をポーリング等で取得するロジックが必要となる。
    * アーキテクチャ全体の複雑性は若干増加する。